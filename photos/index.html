<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‘„å½±</title>
  <!-- å¼•å…¥CSS -->
  <link rel="stylesheet" href="/css/style.css">
<meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="ç»´ç‰¹ç¬”è®°" type="application/atom+xml">
</head>
<body>
  <!-- å¤´éƒ¨ï¼ˆå¯¼èˆªï¼‰ -->
  <header class="header">
  <div class="container">
    <div class="site-branding">
      <!-- Logo -->
      
        <a href="/" class="site-logo">
          <img 
            src="/images/logo.svg" 
            alt="ç»´ç‰¹ç¬”è®°" 
            width="60px" 
            height="60px"
            class="logo-img"
          >
        </a>
      
      <!-- ç½‘ç«™æ ‡é¢˜ -->
      <h1 class="site-title">
        <a href="/">ç»´ç‰¹ç¬”è®°</a>
      </h1>
    </div>
    <!-- å¯¼èˆªèœå• -->
    <nav class="nav">
      <ul>
        <li><a href="/">é¦–é¡µ</a></li>
        <li><a href="/archives">å½’æ¡£</a></li>
        <li><a href="/projects">é¡¹ç›®</a></li>
        <li><a href="/photos">æ‘„å½±</a></li>
        <li><a href="/about">å…³äº</a></li>
        <!-- è‡ªå®šä¹‰èœå•ï¼ˆä»ä¸»é¢˜é…ç½®è¯»å–ï¼‰ -->
        
      </ul>
    </nav>
  </div>
</header>

  <!-- é¡µé¢å†…å®¹åŒº -->
  <main class="content">
    <!-- å¤ç”¨ä¸»é¢˜ç»Ÿä¸€çš„å†…å®¹å®¹å™¨ï¼Œä¿æŒå®½åº¦å¯¹é½ -->
<div class="content-wrapper">
  <!-- é¡µé¢æ ‡é¢˜ï¼ˆå’Œç°æœ‰æ–‡ç« æ ‡é¢˜é£æ ¼ä¸€è‡´ï¼‰ -->
  <h1 class="page-title" style="text-align: center; margin-bottom: clamp(20px, 3vw, 30px); color: var(--dark-color);">
    æ‘„å½±
  </h1>

  <!-- ç…§ç‰‡å®¹å™¨ï¼šFlexå“åº”å¼å¸ƒå±€ï¼Œå¤ç”¨ä¸»é¢˜å¡ç‰‡æ ·å¼ -->
  <div class="photos-grid" id="unsplash-photos">
    <!-- åŠ è½½ä¸­æç¤º -->
    <div class="loading-tip" style="width: 100%; text-align: center; color: var(--dark-color); font-size: 1em;">
      æ­£åœ¨åŠ è½½æˆ‘çš„ç…§ç‰‡...
    </div>
  </div>

  <!-- åˆ†é¡µæŒ‰é’®å®¹å™¨ï¼ˆå¤ç”¨ä¸»é¢˜åˆ†é¡µæ ·å¼ï¼‰ -->
  <div class="pagination" id="photo-pagination" style="margin-top: 30px; display: none;">
    <a href="javascript:;" class="prev-btn" id="prev-page">ä¸Šä¸€é¡µ</a>
    <span class="page-info" id="page-info">ç¬¬ 1 é¡µ / å…± 0 é¡µ</span>
    <a href="javascript:;" class="next-btn" id="next-page">ä¸‹ä¸€é¡µ</a>
  </div>
</div>

<!-- å›¾ç‰‡æ”¾å¤§é¢„è§ˆæ¨¡æ€æ¡† -->
<div class="photo-modal" id="photo-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box;">
  <span class="modal-close" id="modal-close" style="position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; font-weight: bold; cursor: pointer; transition: color 0.3s;">Ã—</span>
  <img class="modal-img" id="modal-img" style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 8px;">
</div>

<script>
  // ========== æ›¿æ¢æˆä½ è‡ªå·±çš„ä¿¡æ¯ ==========
  const UNSPLASH_ACCESS_KEY = "k2Uy2DT3Xu6ZfEXMw1Fkut9-ldShWNbrd7IL7t0e6j8"; // ä½ çš„Unsplash Access Key
  const YOUR_UNSPLASH_USERNAME = "vtecc"; // ä½ çš„Unsplashç”¨æˆ·åï¼ˆ@åé¢çš„éƒ¨åˆ†ï¼‰
  const PHOTO_PER_PAGE = 9; // æ¯é¡µå±•ç¤º9å¼ ç…§ç‰‡
  // ======================================

  // åˆ†é¡µçŠ¶æ€ç®¡ç†
  let currentPage = 1;
  let totalPages = 1;
  let totalPhotos = 0;

  // DOMå…ƒç´ è·å–
  const photosGrid = document.getElementById("unsplash-photos");
  const paginationContainer = document.getElementById("photo-pagination");
  const prevBtn = document.getElementById("prev-page");
  const nextBtn = document.getElementById("next-page");
  const pageInfo = document.getElementById("page-info");
  const photoModal = document.getElementById("photo-modal");
  const modalImg = document.getElementById("modal-img");
  const modalClose = document.getElementById("modal-close");

  // 1. åŠ è½½æŒ‡å®šé¡µç çš„ç…§ç‰‡ï¼ˆæ ¸å¿ƒå‡½æ•°ï¼‰
  function loadPhotos(page = 1) {
    // æ˜¾ç¤ºåŠ è½½æç¤º
    photosGrid.innerHTML = `<div class="loading-tip" style="width: 100%; text-align: center; color: var(--dark-color); font-size: 1em;">æ­£åœ¨åŠ è½½ç¬¬ ${page} é¡µç…§ç‰‡...</div>`;
    
    // è°ƒç”¨Unsplash APIï¼ˆå¸¦åˆ†é¡µå‚æ•°ï¼‰
    fetch(`https://api.unsplash.com/users/${YOUR_UNSPLASH_USERNAME}/photos?page=${page}&per_page=${PHOTO_PER_PAGE}&client_id=${UNSPLASH_ACCESS_KEY}`)
      .then(res => {
        if (!res.ok) throw new Error("åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥Access Keyå’Œç”¨æˆ·åæ˜¯å¦æ­£ç¡®");
        // ä»å“åº”å¤´è·å–æ€»ç…§ç‰‡æ•°ï¼Œè®¡ç®—æ€»é¡µæ•°
        totalPhotos = parseInt(res.headers.get("X-Total") || 0);
        totalPages = Math.ceil(totalPhotos / PHOTO_PER_PAGE);
        return res.json();
      })
      .then(data => {
        // æ¸…ç©ºåŠ è½½æç¤º
        photosGrid.innerHTML = "";

        // æ— ç…§ç‰‡æ—¶æ˜¾ç¤ºæç¤º
        if (data.length === 0) {
          photosGrid.innerHTML = `<p style="width:100%; text-align:center; color:#666; font-size:1em;">ä½ çš„Unsplashè´¦æˆ·æš‚æ— å…¬å¼€ç…§ç‰‡ï½</p>`;
          paginationContainer.style.display = "none";
          return;
        }

        // å¾ªç¯æ¸²æŸ“ç…§ç‰‡å¡ç‰‡ï¼ˆå«æ—¶é—´/åœ°ç‚¹ï¼‰
        data.forEach(photo => {
          // æ ¼å¼åŒ–ä¸Šä¼ æ—¶é—´ï¼šISOæ ¼å¼è½¬ YYYY-MM-DD
          const photoDate = new Date(photo.created_at);
          const formattedDate = `${photoDate.getFullYear()}-${(photoDate.getMonth() + 1).toString().padStart(2, '0')}-${photoDate.getDate().toString().padStart(2, '0')}`;
          
          // å¤„ç†æ‹æ‘„åœ°ç‚¹ï¼šç©ºå€¼æ—¶æ˜¾ç¤ºâ€œæœªå¡«å†™åœ°ç‚¹â€
          const photoLocation = photo.location ? photo.location.split(',')[0] : "æœªå¡«å†™åœ°ç‚¹"; // åªå–åŸå¸‚éƒ¨åˆ†

          const card = document.createElement("div");
          card.className = "photo-card";
          card.innerHTML = `
            <div class="photo-img-wrapper">
              <img src="${photo.urls.regular}" alt="${photo.alt_description || 'æˆ‘çš„Unsplashç…§ç‰‡'}" loading="lazy" data-full-url="${photo.urls.full}">
            </div>
            <div class="photo-caption">
              ${photo.alt_description || 'æ‘„å½±'}
              <!-- æ–°å¢ï¼šæ‹æ‘„æ—¶é—´+åœ°ç‚¹ä¿¡æ¯ -->
              <div class="photo-meta-info">
                <span class="photo-date">ğŸ“… ${formattedDate}</span>
                <span class="photo-location">ğŸ“ ${photoLocation}</span>
              </div>
            </div>
          `;
          photosGrid.appendChild(card);

          // ç»‘å®šå›¾ç‰‡ç‚¹å‡»æ”¾å¤§äº‹ä»¶
          const img = card.querySelector("img");
          img.addEventListener("click", () => {
            modalImg.src = img.dataset.fullUrl; // åŠ è½½åŸå›¾
            photoModal.style.display = "flex"; // æ˜¾ç¤ºæ¨¡æ€æ¡†
          });
        });

        // æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€
        currentPage = page;
        updatePagination();
      })
      .catch(err => {
        photosGrid.innerHTML = `<p style="width:100%; text-align:center; color:#e74c3c; font-size:1em;">åŠ è½½å¤±è´¥ï¼š${err.message}</p>`;
        paginationContainer.style.display = "none";
        console.error("Unsplash APIé”™è¯¯ï¼š", err);
      });
  }

  // 2. æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€ï¼ˆç¦ç”¨/å¯ç”¨ï¼‰
  function updatePagination() {
    paginationContainer.style.display = "block";
    // æ›´æ–°é¡µç ä¿¡æ¯
    pageInfo.textContent = `ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ`;
    
    // ä¸Šä¸€é¡µæŒ‰é’®ï¼šç¬¬ä¸€é¡µç¦ç”¨
    if (currentPage <= 1) {
      prevBtn.classList.add("disabled");
      prevBtn.style.cursor = "not-allowed";
      prevBtn.style.opacity = "0.6";
      prevBtn.style.pointerEvents = "none";
    } else {
      prevBtn.classList.remove("disabled");
      prevBtn.style.cursor = "pointer";
      prevBtn.style.opacity = "1";
      prevBtn.style.pointerEvents = "auto";
    }

    // ä¸‹ä¸€é¡µæŒ‰é’®ï¼šæœ€åä¸€é¡µç¦ç”¨
    if (currentPage >= totalPages) {
      nextBtn.classList.add("disabled");
      nextBtn.style.cursor = "not-allowed";
      nextBtn.style.opacity = "0.6";
      nextBtn.style.pointerEvents = "none";
    } else {
      nextBtn.classList.remove("disabled");
      nextBtn.style.cursor = "pointer";
      nextBtn.style.opacity = "1";
      nextBtn.style.pointerEvents = "auto";
    }
  }

  // 3. ç»‘å®šåˆ†é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶
  prevBtn.addEventListener("click", () => {
    if (currentPage > 1) {
      loadPhotos(currentPage - 1);
      photosGrid.scrollIntoView({ behavior: "smooth" }); // å¹³æ»‘æ»šåŠ¨åˆ°ç…§ç‰‡åŒº
    }
  });

  nextBtn.addEventListener("click", () => {
    if (currentPage < totalPages) {
      loadPhotos(currentPage + 1);
      photosGrid.scrollIntoView({ behavior: "smooth" });
    }
  });

  // 4. å›¾ç‰‡æ”¾å¤§æ¨¡æ€æ¡†äº‹ä»¶
  // å…³é—­æ¨¡æ€æ¡†ï¼ˆç‚¹å‡»Ã—ï¼‰
  modalClose.addEventListener("click", () => {
    photoModal.style.display = "none";
    modalImg.src = ""; // æ¸…ç©ºå›¾ç‰‡ç¼“å­˜
  });

  // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
  photoModal.addEventListener("click", (e) => {
    if (e.target === photoModal) {
      photoModal.style.display = "none";
      modalImg.src = "";
    }
  });

  // æŒ‰ESCé”®å…³é—­æ¨¡æ€æ¡†
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && photoModal.style.display === "flex") {
      photoModal.style.display = "none";
      modalImg.src = "";
    }
  });

  // åˆå§‹åŒ–ï¼šåŠ è½½ç¬¬ä¸€é¡µç…§ç‰‡
  loadPhotos(1);
</script>
  </main>

  <!-- åº•éƒ¨ -->
  <footer class="footer">
  <div class="container">
    <!-- å»ºç«™æ—¶é—´æ˜¾ç¤º -->
    <p class="build-time">
      æœ¬ç«™å§‹å»ºäºï¼š<span id="build-start">2025-09-15</span> | 
      å·²è¿è¡Œï¼š<span id="run-time">0å¹´0æœˆ0å¤©</span>
    </p>
    <p>&copy; 2026 ç»´ç‰¹ç¬”è®° - åŸºäºHexo & vte</p>
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a></p>
    <!-- ç©ºé—´ç©¿æ¢­ -->
    <a href="https://blogs.quest" target="_blank" title="ç©ºé—´ç©¿æ¢­-éšæœºè®¿é—®BlogsClubæˆå‘˜åšå®¢"><img src="https://www.blogsclub.org/images/shuttle_1.png"></a>
  </div>
</footer>

<!-- è®¡ç®—è¿è¡Œæ—¶é•¿çš„JS -->
<script>
// è·å–å»ºç«™æ—¶é—´ï¼ˆä»ä¸»é¢˜é…ç½®è¯»å–ï¼‰
const buildStartTime = new Date('2025-09-15');

// è®¡ç®—æ—¶é—´å·®å‡½æ•°
function calculateRunTime() {
  const now = new Date();
  const diff = now - buildStartTime;

  // è®¡ç®—å¹´ã€æœˆã€å¤©
  const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365));
  const months = Math.floor((diff % (1000 * 60 * 60 * 24 * 365)) / (1000 * 60 * 60 * 24 * 30));
  const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));

  // æ›´æ–°æ˜¾ç¤º
  document.getElementById('run-time').textContent = `${years}å¹´${months}æœˆ${days}å¤©`;
}

// åˆå§‹åŒ–è®¡ç®—
calculateRunTime();
// æ¯å¤©æ›´æ–°ä¸€æ¬¡
setInterval(calculateRunTime, 1000 * 60 * 60 * 24);
</script>

  <!-- å¼•å…¥JS -->
  <script src="/js/main.js"></script>
</body>
</html>